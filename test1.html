<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Căutare în articole</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        #results { margin-top: 20px; }
        .result { margin-bottom: 20px; border-bottom: 1px solid #ccc; padding-bottom: 10px; }
        .highlight { background-color: yellow; font-weight: bold; }
        #debug { margin-top: 20px; border: 1px solid #ccc; padding: 10px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>Căutare în articole</h1>
    
    <input type="text" id="searchInput" placeholder="Introduceți fraza de căutat">
    <button onclick="search()">Caută</button><br><br>

    <div id="results"></div>
    <div id="debug"></div>

    <script>
        let articles = [];
        let debugInfo = [];

        function log(message) {
            console.log(message);
            debugInfo.push(message);
            document.getElementById('debug').textContent = debugInfo.join('\n');
        }

        function normalizeText(text) {
            return text.toLowerCase()
                .normalize("NFD")
                .replace(/[\u0300-\u036f]/g, "");
        }

        function getFileList() {
            log("Încercare de obținere a listei de fișiere...");
            const fileNames = ['articol1.txt', 'articol2.txt'];
            log(`Fișiere găsite: ${fileNames.join(', ')}`);
            loadArticles(fileNames);
        }

        function loadArticles(fileNames) {
            log("Începere încărcare articole...");
            articles = [
                { content: "Să scrii povestea vieţii tale într-o asemenea dramă a marginalizării este o formă a eşecului, este ca şi când ai încerca să capeţi înţelepciune printr-o experienţă de recunoaştere a finitudinii unei existenţe precedată de neant, fără a avea revelaţia unei trancenderi a condiţiei tale prin unirea cu Dumnezeu." },
                { content: "Acesta este un alt articol de test care nu conține cuvintele căutate." }
            ];
            log(`Articole încărcate: ${articles.length}`);
        }

        function search() {
            const query = document.getElementById('searchInput').value.trim();
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '';
            debugInfo = [];

            log(`Căutare pentru: "${query}"`);
            let foundResults = 0;

            articles.forEach((article, index) => {
                if (normalizeText(article.content).includes(normalizeText(query))) {
                    foundResults++;
                    const highlightedContent = highlightText(article.content, query);
                    const div = document.createElement('div');
                    div.className = 'result';
                    div.innerHTML = highlightedContent;
                    resultsDiv.appendChild(div);
                    log(`Găsit în articolul ${index + 1}`);
                } else {
                    log(`Nu s-a găsit în articolul ${index + 1}`);
                }
            });

            log(`Rezultate găsite: ${foundResults}`);
            if (foundResults === 0) {
                resultsDiv.innerHTML = '<p>Nu s-au găsit rezultate.</p>';
            }
        }

        function highlightText(text, query) {
            const escapedQuery = escapeRegExp(query);
            const regex = new RegExp(`(${escapedQuery})`, 'gi');
            return text.replace(regex, '<span class="highlight">$1</span>');
        }

        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        window.onload = getFileList;
    </script>
</body>
</html>
